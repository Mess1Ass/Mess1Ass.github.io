[{"id":"10be6ba17a189071ff3c4ecf77a6208e","title":"åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºè§†é¢‘æ–‡ä»¶åˆ†å‘æœåŠ¡","content":"åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºè§†é¢‘æ–‡ä»¶åˆ†å‘æœåŠ¡ï¼ˆFTP + Nginxï¼‰åœ¨å¼€å‘å‰åç«¯åˆ†ç¦»é¡¹ç›®æ—¶ï¼Œç»å¸¸éœ€è¦å°†é™æ€èµ„æºå¦‚è§†é¢‘ã€æ–‡ä»¶ç­‰é›†ä¸­ç®¡ç†å’Œè®¿é—®ã€‚æœ¬ç¯‡è®°å½•å¦‚ä½•åœ¨ Linux æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ª video æ–‡ä»¶å¤¹ï¼Œé…ç½® FTP æœåŠ¡è¿›è¡Œä¸Šä¼ ç®¡ç†ï¼Œå¹¶ä½¿ç”¨ Nginx æ­å»ºæ–‡ä»¶ä¸‹è½½ç«™ï¼Œå®ç°å‰ç«¯ç›´æ¥è®¿é—®é“¾æ¥æ’­æ”¾è§†é¢‘çš„éœ€æ±‚ã€‚\nä¸€ã€ç›®æ ‡è¯´æ˜âœ… åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»º &#x2F;home&#x2F;video æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨è§†é¢‘èµ„æº\nâœ… é…ç½® FTP æœåŠ¡ï¼ˆvsftpdï¼‰ï¼Œæ–¹ä¾¿ä¸Šä¼ ç®¡ç†è§†é¢‘\nâœ… ä½¿ç”¨ Nginx æ˜ å°„è¯¥æ–‡ä»¶å¤¹ï¼Œå®ç°ç½‘é¡µå¯è®¿é—®ä¸‹è½½\nâœ… å‰ç«¯ä½¿ç”¨ç›´æ¥é“¾æ¥ https://yourdomain.com/video/xxx.mp4 æ’­æ”¾è§†é¢‘\näºŒã€åˆ›å»ºè§†é¢‘æ–‡ä»¶å¤¹123sudo mkdir /home/videosudo chown -R www-data:www-data /home/videosudo chmod -R 755 /home/video\nâœ… å¦‚æœä½ æƒ³é€šè¿‡ FTP ä¸Šä¼ å¹¶é www-data ç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥ç»™å¯¹åº”ç”¨æˆ·æˆæƒï¼ˆè§ä¸‹æ–¹ FTP é…ç½®ï¼‰ã€‚ä¸‰ã€é…ç½® FTP æœåŠ¡ï¼ˆvsftpdï¼‰1. å®‰è£… vsftpd12sudo apt updatesudo apt install vsftpd -y\n2. æ·»åŠ  FTP ç”¨æˆ·ï¼ˆç”¨äºä¸Šä¼ ï¼‰12sudo adduser ftpusersudo passwd ftpuser\næŠŠ &#x2F;home&#x2F;video è®¾ç½®ä¸º ftpuser çš„ä¸»ç›®å½•ï¼š\n12sudo usermod -d /home/video ftpusersudo chown -R ftpuser:ftpuser /home/video\n3. ç¼–è¾‘ vsftpd é…ç½®æ–‡ä»¶1sudo nano /etc/vsftpd.conf\nä¿®æ”¹æˆ–æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\n1234567891011listen=YESlisten_ipv6=NOanonymous_enable=NOlocal_enable=YESwrite_enable=YESlocal_umask=022chroot_local_user=YESallow_writeable_chroot=YESpasv_enable=YESpasv_min_port=30000pasv_max_port=30100\nä¿å­˜å¹¶é‡å¯æœåŠ¡ï¼š\n1sudo systemctl restart vsftpd\nâœ… ä½ ç°åœ¨å¯ä»¥é€šè¿‡ FTP å·¥å…·ï¼ˆå¦‚ FileZillaï¼‰è¿æ¥æœåŠ¡å™¨ä¸Šä¼ è§†é¢‘æ–‡ä»¶åˆ° &#x2F;home&#x2F;video ç›®å½•äº†ã€‚å››ã€é…ç½® Nginx é™æ€æ–‡ä»¶ä¸‹è½½ç«™1. ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶å‡è®¾ä½ å·²ç»éƒ¨ç½²äº† Nginxï¼Œæ‰“å¼€ä½ çš„ç½‘ç«™é…ç½®ï¼š\n1sudo nano /etc/nginx/sites-available/default\nåœ¨ server å—ä¸­æ·»åŠ ä¸€æ®µï¼š\n123456location /video/ &#123;    alias /home/video/;    autoindex on;    add_header Content-Disposition &quot;inline&quot;;    add_header Access-Control-Allow-Origin *;&#125;\n2. æ£€æŸ¥é…ç½®å¹¶é‡è½½ Nginx12sudo nginx -tsudo systemctl reload nginx\n3. è®¿é—®æµ‹è¯•ç°åœ¨ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€ç›´æ¥è®¿é—®æˆ–æ’­æ”¾è§†é¢‘äº†ï¼š\n1https://yourdomain.com/video/demo.mp4\næµè§ˆå™¨è®¿é—® &#x2F;video&#x2F; ç›®å½•è¿˜å¯ä»¥åˆ—å‡ºæ–‡ä»¶æ¸…å•ï¼ˆå¦‚æœ autoindex æ‰“å¼€ï¼‰ã€‚\näº”ã€å‰ç«¯é“¾æ¥ä¿®æ”¹åœ¨ React æˆ– Vue é¡¹ç›®ä¸­ï¼Œåªéœ€å°†è§†é¢‘èµ„æºé“¾æ¥æ”¹æˆï¼š\n1&lt;video src=&quot;https://yourdomain.com/video/sample.mp4&quot; controls /&gt;\næ— éœ€é¢å¤–é…ç½®è·¨åŸŸï¼Œè‹¥æ¥å£ä¸ºä¸åŒæºï¼Œä¹Ÿå¯ä»¥é€šè¿‡ add_header Access-Control-Allow-Origin * ä¿è¯èµ„æºå¯è®¿é—®ã€‚\nå…­ã€å…¶ä»–å»ºè®®âœ… è§†é¢‘è¾ƒå¤šå»ºè®®æŒ‰æ—¥æœŸæˆ–ç±»åˆ«åˆ†æ–‡ä»¶å¤¹ä¸Šä¼ ï¼Œä¾¿äºç®¡ç†\nâœ… å¯é…åˆå®šæ—¶ä»»åŠ¡ï¼ˆcronï¼‰æ¸…ç†è¿‡æœŸè§†é¢‘æ–‡ä»¶\nâœ… å¦‚æœä½ å¯¹æƒé™æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¯å•ç‹¬åˆ›å»ºç”¨æˆ·ç»„å¹¶æ§åˆ¶æ–‡ä»¶è®¿é—®\nä¸ƒã€æ€»ç»“é€šè¿‡æœ¬æ–‡é…ç½®ï¼Œè§†é¢‘èµ„æºçš„ä¸Šä¼ ã€ç®¡ç†å’Œå‰ç«¯è®¿é—®å°†å˜å¾—ç®€å•é«˜æ•ˆã€‚é€‚ç”¨äºåšå®¢ã€åå°ç®¡ç†ç³»ç»Ÿã€åª’ä½“å†…å®¹å¹³å°ç­‰åœºæ™¯ï¼Œç»“åˆ FTP ä¸ Nginx çš„ä¼˜åŠ¿ï¼Œå³æ–¹ä¾¿ç®¡ç†ä¹Ÿæ”¯æŒé«˜å¹¶å‘è®¿é—®ã€‚\nå¦‚æœ‰æ›´å¤šéœ€æ±‚ï¼Œä¾‹å¦‚ç”¨æˆ·ä¸Šä¼ ã€æƒé™ç®¡ç†ã€ä¸‹è½½é‰´æƒç­‰ï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥é›†æˆ Flask æˆ– Django ç­‰åç«¯æœåŠ¡åšäºŒæ¬¡å¼€å‘ã€‚\n","slug":"vedioStorage","date":"2025-07-10T14:31:23.000Z","categories_index":"","tags_index":"æœåŠ¡æ­å»º,ftp","author_index":"Mess1A"},{"id":"f2cb4d90a926fecafd5804ed8b8967f5","title":"Flaské¡¹ç›®æœåŠ¡å™¨éƒ¨ç½²","content":"ğŸš€ Flask é¡¹ç›®éƒ¨ç½²æ•™ç¨‹ï¼ˆä½¿ç”¨ Gunicorn + Nginx + HTTPSï¼‰æœ¬æ•™ç¨‹ä»‹ç»å¦‚ä½•åœ¨ Ubuntu æœåŠ¡å™¨ä¸Šä½¿ç”¨ Gunicorn + Nginx éƒ¨ç½² Flask åç«¯ï¼Œå¹¶å®ç°è‡ªå®šä¹‰åŸŸåç»‘å®šã€HTTPS è‡ªåŠ¨ç­¾å‘åŠå‰ç«¯ Vercel å‘å¸ƒã€‚\nğŸ§± é¡¹ç›®ç»“æ„æ¦‚è§ˆtoolBackend&#x2F;           # Flask åç«¯é¡¹ç›®toolFrontend&#x2F;          # React å‰ç«¯é¡¹ç›®ï¼ˆå·²æ‰˜ç®¡ GitHubï¼‰\nâœ… å‰ææ¡ä»¶ä¸€å° Ubuntu æœåŠ¡å™¨ï¼ˆæ¨è 20.04+ï¼‰\nå·²å®‰è£… Python3ã€pipã€git\nå·²ç»‘å®šåŸŸåï¼ˆå¦‚ï¼š48api.tool4me.cnï¼‰\nå·²è§£æ A è®°å½•è‡³æœåŠ¡å™¨å…¬ç½‘ IP\nğŸ“¦ 1. å®‰è£…ä¾èµ–12sudo apt updatesudo apt install nginx certbot python3-certbot-nginx\næ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒç®¡ç†ä¾èµ–ï¼š\n123python3 -m venv venvsource venv/bin/activatepip install -r requirements.txt\nâš™ï¸ 2. ä½¿ç”¨ Gunicorn å¯åŠ¨ Flask é¡¹ç›®12gunicorn app:app --bind 127.0.0.1:5000 --workers 4 --daemonapp:app è¡¨ç¤ºï¼šapp.py ä¸­çš„ app å®ä¾‹\n\nå¯å°†å…¶å†™å…¥ systemd æœåŠ¡å®ç°å®ˆæŠ¤è¿›ç¨‹ç®¡ç†ï¼ˆå¯é€‰ï¼‰\nğŸŒ 3. é…ç½® Nginx åå‘ä»£ç†ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š\n1sudo nano /etc/nginx/sites-available/your.domain.com\nå†…å®¹ç¤ºä¾‹ï¼š\n12345678910server &#123;    listen 80;    server_name your.domain.com;    location / &#123;        proxy_pass http://127.0.0.1:5000;        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;    &#125;&#125;\nåˆ›å»ºè½¯é“¾æ¥å¯ç”¨ï¼š\n123sudo ln -s /etc/nginx/sites-available/your.domain.com /etc/nginx/sites-enabled/sudo nginx -tsudo systemctl reload nginx\nğŸ”’ 4. é…ç½® HTTPSï¼ˆLetâ€™s Encryptï¼‰ä½¿ç”¨ certbot è‡ªåŠ¨ç­¾å‘è¯ä¹¦ï¼š\n1sudo certbot --nginx -d your.domain.com\nè¯ä¹¦è‡ªåŠ¨ç»­æœŸè®¾ç½®ï¼š\n1sudo systemctl status certbot.timer  # é»˜è®¤å·²å¯ç”¨è‡ªåŠ¨ç»­æœŸ\nğŸŒ 5. å‰ç«¯éƒ¨ç½²åˆ° Vercelç™»å½• vercel.com\nç»‘å®šä½ çš„ GitHub ä»“åº“ï¼ˆå¦‚ï¼štoolFrontendï¼‰\nè®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚ï¼šAPI_URL æŒ‡å‘ä½ çš„åç«¯ï¼‰\nè‡ªåŠ¨éƒ¨ç½²æˆåŠŸåç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆå¦‚ï¼štool4me.cnï¼‰\nğŸ›¡ï¸ 6. å®‰å…¨ä¼˜åŒ–å»ºè®®ï¼ˆå¯é€‰ï¼‰é…ç½® fail2ban é˜²çˆ†ç ´\nä½¿ç”¨ ufw å¼€å¯é˜²ç«å¢™ï¼Œä»…å¼€æ”¾ 80 å’Œ 443 ç«¯å£\nå®šæœŸå¤‡ä»½ MongoDB æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶\nğŸ¯ æ•ˆæœéªŒè¯åç«¯ API å¯é€šè¿‡ https://your.domain.com/api/xxx è®¿é—®\nå‰ç«¯ç½‘é¡µå¯é€šè¿‡ https://domain.com è®¿é—®\næ•°æ®ä¼ è¾“åŠ å¯†ã€å…¨çƒ CDN åŠ é€Ÿç”Ÿæ•ˆ\nğŸ‘¨â€ğŸ’» æŠ€æœ¯æ ˆå›é¡¾æ¨¡å—\tæŠ€æœ¯æ ˆåç«¯\tFlask + Gunicorn + MongoDBå‰ç«¯\tReact + Semi Design + Verceléƒ¨ç½²\tNginx + certbot + systemdåŸŸå &amp; å®‰å…¨\tDNSPod + Letâ€™s Encrypt\n","slug":"flaskDeploy","date":"2025-07-10T14:31:23.000Z","categories_index":"","tags_index":"æœåŠ¡å™¨éƒ¨ç½²","author_index":"Mess1A"},{"id":"c86bd12937c2148f53e2425d8c90df48","title":"ä¸èŠ­å•†åŸåˆ‡ç¥¨","content":"\n\n\n\n\n\n\nWARNING\næœ¬ç³»ç»Ÿä»…é€‚ç”¨äºä¸èŠ­å•†åŸï¼Œæœªæµ‹è¯•ï¼Œä¸ä¿è¯å¯è¡Œæ€§ï¼Œé‡ç‚¹ä»‹ç»playwrightã€‚æœ¬ç³»ç»Ÿçˆ¬è™«ä»…ç”¨äºå­¦ä¹ äº¤æµï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚\n\nä¸èŠ­å•†åŸé—¨ç¥¨æŠ¢è´­é¡¹ç›®ç®€ä»‹æœ¬é¡¹ç›®æ—¨åœ¨ä½¿ç”¨playwrightæŠ€æœ¯ è‡ªåŠ¨åŒ–è´­ä¹°ä¸èŠ­å…¬æ¼”é—¨ç¥¨ ã€‚  \nåŠŸèƒ½ä»‹ç»\nè‡ªåŠ¨è´­ä¹°é—¨ç¥¨ï¼šè°ƒç”¨è´­ä¹°apiæ¥å£ï¼Œå®ç°è‡ªåŠ¨åŒ–è´­ä¹°ã€‚  \nplaywright æ”¯æŒï¼šç›¸æ¯”äºseleniumï¼Œplaywright æ›´åŠ é€‚åˆè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œæ›´ç¨³å®šã€‚  \nå¤šçº¿ç¨‹ä¼˜åŒ–ï¼šæå‡è¯·æ±‚æ•ˆç‡ï¼Œå‡å°‘ç­‰å¾…æ—¶é—´ã€‚  \né˜²åçˆ¬ç­–ç•¥ï¼šåŠ å…¥è¯·æ±‚é—´éš”æ§åˆ¶ï¼Œé™ä½è¢«å°é£é™©ã€‚\n\nä»£ç ä¸»è¦å®ç°éƒ¨åˆ†ğŸ¯ 1.playwrightå®‰è£…ğŸ“œ ä»£ç å®ç°12345# å®‰è£…playwrightpip install playwright# å®‰è£…playwrightæ‰€éœ€çš„æµè§ˆå™¨æ’ä»¶playwright install\n\nğŸ¯ 2.playwrightå¯åŠ¨æµè§ˆå™¨ğŸ“œ ä»£ç å®ç°1234567891011121314151617181920async with async_playwright() as p:    # ä»¥æ— å¤´æ¨¡å¼è¿è¡Œ å¯æ›´æ¢å¯åŠ¨çš„æµè§ˆå™¨    browser = await p.chromium.launch(executable_path=&quot;.\\ms-playwright\\chromium-1169\\chrome-win\\chrome.exe&quot;, headless=False)    context = await browser.new_context()    page = await context.new_page()    try:        # âœ… ç”¨äº API è¯·æ±‚çš„ç‹¬ç«‹ context        api_context = await p.request.new_context()        ###  é¡µé¢æ“ä½œä»£ç         ###  é¡µé¢æ“ä½œä»£ç         await asyncio.sleep(60)  # ä¿æŒé¡µé¢ä¸€æ®µæ—¶é—´ï¼Œä¾¿äºè§‚å¯Ÿ        await browser.close()    except Exception as e:        print(&quot;å¼‚å¸¸æˆ–æµè§ˆå™¨å…³é—­:&quot;, e)    finally:        await browser.close()\n\nğŸ¯ 3.playwrightè°ƒç”¨è´­ç¥¨æ¥å£ğŸ“Œ å‡½æ•°ï¼šmake_request_with_retriesæ­¤å‡½æ•°ç”¨äºè°ƒç”¨è´­ç¥¨apiï¼Œç›´åˆ°æˆåŠŸ&#x2F;æ²¡æœ‰åº“å­˜ï¼Œå¹¶å°†è¿”å›çš„ä¿¡æ¯ä¿å­˜æˆæ—¥å¿—ï¼Œå¹¶è¿”å›æ—¥å¿—ä¿¡æ¯ã€‚  \nğŸ“Œ å‡½æ•°å‚æ•°\ncontext: APIRequestContextï¼šå¿…é¡»ä¸ºAPIRequestContextç±»å‹ï¼Œå…¶ä»–ç±»å‹æ²¡æœ‰get&#x2F;postæ–¹æ³•ã€‚  \nticket_Add_urlï¼šè´­ç¥¨urlã€‚  \nticket_Add_paramsï¼šæ¥å£ä¼ å‚ã€‚  \nticket_Add_headersï¼šè¯·æ±‚å¤´ã€‚\n\nğŸ“œ ä»£ç å®ç°1234567891011121314151617181920212223242526272829303132async with async_playwright(context: APIRequestContext, ticket_Add_url, ticket_Add_params, ticket_Add_headers) as p:    retries = 0    backoff = 0.2    while retries &lt; max_retries:        try:            response = await context.post(ticket_Add_url, params=ticket_Add_params, headers=ticket_Add_headers)            current_time = datetime.now()            if response.ok:                data = await response.json()                if &#x27;success&#x27; in data.get(&quot;Message&quot;, &quot;&quot;):                    log_entry = f&quot;æ•°æ®=&#123;data&#125;&quot;                    log_data.append(log_entry)                    return log_data                else:                    log_entry = f&quot;æ•°æ®=&#123;data&#125;&quot;                    log_data.append(log_entry)                    retries += 1                    delay = backoff * (2 ** retries) + random.random()*0.1                    await asyncio.sleep(delay)            else:                error_entry = f&quot;çŠ¶æ€ç : &#123;response.status&#125;&quot;                log_data.append(error_entry)                retries += 1                delay = backoff * (2 ** retries) + random.random()*0.1                await asyncio.sleep(delay)        except Exception as e:            error_entry = f&quot;&#123;e&#125;&quot;            log_data.append(error_entry)            retries += 1            delay = backoff * (2 ** retries) + random.random()*0.1            await asyncio.sleep(delay)    return log_data","slug":"ticketPlayWright","date":"2025-06-10T16:00:00.000Z","categories_index":"","tags_index":"python,çˆ¬è™«,playwright","author_index":"Mess1A"},{"id":"f3519b3c4b337b4d2b1c684904d9f509","title":"ä¸èŠ­å•†åŸç«ä»·æ•°æ®ç»Ÿè®¡","content":"\n\n\n\n\n\n\nWARNING\næœ¬ç³»ç»Ÿä»…é€‚ç”¨äºä¸èŠ­å•†åŸï¼Œå…¶ä»–å•†åŸè¯·è‡ªè¡Œä¿®æ”¹ä»£ç ã€‚æœ¬ç³»ç»Ÿçˆ¬è™«ä»…ç”¨äºå­¦ä¹ äº¤æµï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚\n\nä¸èŠ­å•†åŸæ•°æ®å¯¼å‡ºå·¥å…·é¡¹ç›®ç®€ä»‹æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªç”¨äº è‡ªåŠ¨åŒ–æŠ“å–å’Œå¯¼å‡ºä¸èŠ­å•†åŸï¼ˆhttps://shop.48.cnï¼‰æ‹å–æ•°æ® çš„ Python å·¥å…·ã€‚ç”¨æˆ·å¯ä»¥è·å– æŒ‡å®šæ‹å–é¡µé¢ çš„ä¿¡æ¯ï¼Œå¹¶å°†å…¶æ•´ç†åå¯¼å‡ºä¸º Excel æ–‡ä»¶ã€‚  \nåŠŸèƒ½ä»‹ç»\nè‡ªåŠ¨è·å–æ‹å–æ•°æ®ï¼šè§£æå•†å“è¯¦æƒ…é¡µï¼Œæå–å…³é”®ä¿¡æ¯ï¼Œå¦‚ç«æ‹ä»·æ ¼ã€å‡ºä»·è®°å½•ç­‰ã€‚  \næ•°æ®å­˜å‚¨ï¼šå°†æŠ“å–çš„æ•°æ®å­˜å…¥ Excelï¼Œæ–¹ä¾¿åç»­åˆ†æã€‚  \nTampermonkey è„šæœ¬æ”¯æŒï¼šæ”¯æŒåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ Tampermonkey ç›´æ¥è·å–æ•°æ®ã€‚  \nå¤šçº¿ç¨‹ä¼˜åŒ–ï¼šæå‡è¯·æ±‚æ•ˆç‡ï¼Œå‡å°‘ç­‰å¾…æ—¶é—´ã€‚  \né˜²åçˆ¬ç­–ç•¥ï¼šåŠ å…¥è¯·æ±‚é—´éš”æ§åˆ¶ï¼Œé™ä½è¢«å°é£é™©ã€‚\n\nä»£ç ä¸»è¦å®ç°éƒ¨åˆ†ğŸ¯ 1.è·å–ç«ä»·æˆåŠŸä¸å¤±è´¥æ•°æ®ğŸ“Œ å‡½æ•°ï¼šauto_bid_until_endæ­¤å‡½æ•°ç”¨äºè‡ªåŠ¨æ‰§è¡Œç«ä»·è¿‡ç¨‹ï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šçš„æˆåŠŸç«ä»·æ•°é‡ï¼Œå¹¶æ”¶é›†æ‰€æœ‰ç«ä»·æ•°æ®ï¼ŒåŒ…æ‹¬æˆåŠŸå’Œå¤±è´¥çš„ç«ä»·ä¿¡æ¯ã€‚  \nğŸ“Œ å‡½æ•°å‚æ•°\ndriverï¼šWebDriver å®ä¾‹ï¼Œç”¨äºä¸ç½‘é¡µäº¤äº’ã€‚  \ntarget_successful_countï¼šç›®æ ‡æˆåŠŸç«ä»·çš„æ•°é‡ã€‚  \nbid_typeï¼šç«ä»·ç±»å‹ï¼ˆåº§ä½ç±»åˆ«ï¼‰ã€‚  \ntheater_nameï¼šå‰§é™¢åç§°ã€‚\n\nğŸ“œ ä»£ç å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667def auto_bid_until_end(driver, target_successful_count, bid_type, theater_name):    successful_bids_data = []  # å­˜å‚¨æ‰€æœ‰æˆåŠŸç«ä»·ä¿¡æ¯    unsuccessful_bids_data = []  # å­˜å‚¨æ‰€æœ‰æœªæˆåŠŸç«ä»·ä¿¡æ¯    total_bids_data = []    wait = WebDriverWait(driver, 10)    # è·å–æœ€å¤§é¡µæ•°    max_page_element = driver.find_element(By.XPATH, &#x27;/html/body/div[2]/div/div[3]/div[3]/div[2]/div[2]/div[4]/span[3]&#x27;)    max_page = int(max_page_element.text)    now_page = 1    # ğŸ“Œ **è·å–æˆåŠŸç«ä»·æ•°æ®**    while now_page &lt;= max_page:        u_blist = driver.find_element(By.ID, &quot;u_blist&quot;)        successful_bids_data.extend(parse_successful_bids(u_blist))        if len(successful_bids_data) &gt;= target_successful_count:            print(&quot;âœ… å·²è·å–æ‰€æœ‰æˆåŠŸç«ä»·ä¿¡æ¯&quot;)            break        # æ£€æŸ¥ `u_blistM` æ˜¯å¦å­˜åœ¨é¢å¤–çš„æˆåŠŸç«ä»·ä¿¡æ¯        u_blistM = driver.find_element(By.ID, &quot;u_blistM&quot;)        successful_bids_data.extend(parse_successful_bids(u_blistM))        if len(successful_bids_data) &gt;= target_successful_count:            print(&quot;âœ… å·²è·å–æ‰€æœ‰æˆåŠŸç«ä»·ä¿¡æ¯&quot;)            break        # ğŸ“Œ **ç¿»é¡µ**        next_button = wait.until(EC.element_to_be_clickable((By.XPATH, &#x27;//*[@id=&quot;a_b_n&quot;]&#x27;)))        next_button.click()        print(f&quot;ğŸ”„ åŠ è½½ç¬¬ &#123;now_page&#125; é¡µ...&quot;)        now_page += 1        time.sleep(0.15)    # ğŸ“Œ **è·å–æœªæˆåŠŸç«ä»·æ•°æ®**    while now_page &lt;= max_page:        u_blist = driver.find_element(By.ID, &quot;u_blist&quot;)        unsuccessful_bids_data.extend(parse_unsuccessful_bids(u_blist, successful_bids_data))        # æ£€æŸ¥ `u_blistM` æ˜¯å¦å­˜åœ¨é¢å¤–çš„æœªæˆåŠŸç«ä»·ä¿¡æ¯        u_blistM = driver.find_element(By.ID, &quot;u_blistM&quot;)        unsuccessful_bids_data.extend(parse_unsuccessful_bids(u_blistM, successful_bids_data))        # ğŸ“Œ **ç¿»é¡µ**        next_button = wait.until(EC.element_to_be_clickable((By.XPATH, &#x27;//*[@id=&quot;a_b_n&quot;]&#x27;)))        next_button.click()        print(f&quot;ğŸ”„ åŠ è½½ç¬¬ &#123;now_page&#125; é¡µ...&quot;)        now_page += 1        time.sleep(0.15)    # **å»é‡å¤„ç†**    unsuccessful_bids_data = deduplication(unsuccessful_bids_data)    total_bids_data = successful_bids_data + unsuccessful_bids_data    # ğŸ“Œ **è·å–åº§ä½ä¿¡æ¯**    seats = get_seat_positon(theater_name, bid_type, target_successful_count)    # **åˆ†é…åº§ä½å·**    for idx, bid in enumerate(total_bids_data):        bid[&quot;åº§ä½ç±»å‹&quot;] = bid_type        if idx &gt; len(seats) - 1:            bid[&quot;åº§ä½å·&quot;] = &quot;ç«ä»·å¤±è´¥&quot;        else:            bid[&quot;åº§ä½å·&quot;] = seats[idx]  # æ·»åŠ åº§ä½å·    return total_bids_data\n\nğŸ¯ 2.ç»Ÿè®¡å½“å‰é¡µé¢ç«ä»·æ•°æ®å‰çš„å‡†å¤‡æ´»åŠ¨ğŸ“Œ å‡½æ•°ï¼šstats_one_goodæ­¤å‡½æ•°ç”¨äºè·å–ä¸èŠ­å•†åŸçš„å•é¡µé¢ä¸‹çš„ç«ä»·æ•°æ®ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° Excel æ–‡ä»¶ä¸­ã€‚\nğŸ“œ ä»£ç å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556def stats_one_good(driver):    # ğŸ“Œ è·å–å‰§é™¢åç§°å’Œ Excel æ–‡ä»¶å    theater_name = driver.find_element(By.XPATH, &quot;/html/body/div[2]/div/div[2]/div[2]/ul/li[2]/p&quot;).text    excel_name = driver.find_element(By.XPATH, &quot;/html/body/div[2]/div/div[2]/div[2]/ul/li[1]&quot;).text    # ğŸ“Œ è·å–å•†å“æ ‡é¢˜    title_name_element = driver.find_element(By.CLASS_NAME, &quot;i_tit&quot;)    title_name = title_name_element.text.strip()  # è·å–æ–‡æœ¬å†…å®¹å¹¶å»é™¤é¦–å°¾ç©ºæ ¼    # ğŸ“Œ è·å–å•†å“è¯¦ç»†ä¿¡æ¯å¹¶åˆ¤æ–­æ˜¯å¦ä¸ºç”Ÿæ—¥å…¬æ¼”    item_info = driver.find_element(By.XPATH, &#x27;//*[@id=&quot;TabTab03Con1&quot;]&#x27;).get_attribute(&#x27;outerHTML&#x27;)    soup = BeautifulSoup(item_info, &#x27;html.parser&#x27;)    item_info_text = soup.get_text()    birthday = &quot;ç”Ÿæ—¥æ½®æµåŒ…&quot; in item_info_text    # ğŸ“Œ ç¡®å®šç«ä»·ç±»å‹    bid_type = get_seat_type(title_name)    # ğŸ“Œ æ ¹æ®å‰§åœºå’Œå•†å“ç±»å‹é€‰æ‹©ç›¸åº”çš„ç«ä»·æ•°é‡    if &quot;SNH&quot; in theater_name and &quot;æ˜Ÿæ¢¦å‰§é™¢&quot; in title_name and &quot;MINILIVE&quot; not in title_name:        bid_number = get_bid_number_SNH(bid_type, driver)        if birthday:            theater_name = &quot;SNHbirthday&quot;    elif &quot;SNH&quot; in theater_name and &quot;æ˜Ÿæ¢¦ç©ºé—´&quot; in title_name and &quot;MINILIVE&quot; not in title_name:        bid_number = get_bid_number_HGH(bid_type)        theater_name = &quot;HGH&quot;    elif &quot;BEJ&quot; in theater_name and &quot;ç”Ÿæ—¥ä¼š&quot; not in title_name:        bid_number = get_bid_number_BEJ(driver)    elif &quot;MINILIVE&quot; in title_name:        bid_number = get_bid_number_MiniLive(driver)        theater_name = &quot;MINILIVE&quot;    elif &quot;æ‹ç«‹å¾—&quot; in title_name:        bid_number = get_bid_number_pld(driver)        theater_name = &quot;æ‹ç«‹å¾—&quot;    elif &quot;ç”Ÿæ—¥ä¼š&quot; in title_name:        bid_number = get_bid_number_birthparty(driver, theater_name)        theater_name = &quot;ç”Ÿæ—¥ä¼š&quot;    print(f&quot;ğŸ« ç«ä»·å¸­ä½æ€»æ•°ï¼š&#123;bid_number&#125;&quot;)    # ğŸ“Œ ç«ä»·æµç¨‹    if bid_number != 0:        max_bid_num = bid_number        total_bids_data = auto_bid_until_end(driver, max_bid_num, bid_type, theater_name)        # ğŸ“Œ è·å–å•†å“ ID å¹¶ä¿å­˜ Excel æ•°æ®        item_id = get_item_name(driver)        save_excel(total_bids_data, item_id, excel_name)    # ğŸ“Œ åˆ·æ–°é¡µé¢ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡æ“ä½œ    driver.refresh()\n\nğŸ“Š 3.ä¿å­˜ç«ä»·æ•°æ®åˆ° ExcelğŸ“Œ å‡½æ•°ï¼šsave_excelæ­¤å‡½æ•°ç”¨äºå°†ç«ä»·æˆåŠŸçš„æ•°æ®ä¿å­˜åˆ° Excel æ–‡ä»¶ï¼Œæ”¯æŒå†™å…¥å•†å“åç§°ã€è¡¨å¤´ã€ç«ä»·ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ç»Ÿè®¡ä¿¡æ¯ï¼ˆæœ€å°&#x2F;æœ€å¤§å‡ºä»·ã€æœ€æ—©&#x2F;æœ€æ™šå‡ºä»·ç­‰ï¼‰ã€‚\nğŸ“œ ä»£ç å®ç°12345678910111213141516171819202122232425262728293031323334353637def save_excel(successful_bids_data, item_name, output_file=&quot;bidding_results.xlsx&quot;):    &quot;&quot;&quot;    å°†ç«ä»·æˆåŠŸæ•°æ®ä¿å­˜åˆ° Excel æ–‡ä»¶ã€‚    :param successful_bids_data: ç«ä»·æˆåŠŸçš„æ•°æ®åˆ—è¡¨    :param item_name: å•†å“åç§°    :param output_file: è¾“å‡ºæ–‡ä»¶åï¼ˆé»˜è®¤ï¼š&quot;bidding_results.xlsx&quot;ï¼‰    &quot;&quot;&quot;    # ğŸ“Œ å°†æ•°æ®è½¬æ¢ä¸º Pandas DataFrame    df = pd.DataFrame(successful_bids_data)        # ğŸ“Œ åˆ›å»º Excel å·¥ä½œç°¿å’Œå·¥ä½œè¡¨    wb = Workbook()    ws = wb.active    ws.title = &quot;Bidding Results&quot;        # ğŸ“Œ åœ¨ Excel æ–‡ä»¶çš„ç¬¬ä¸€è¡Œå†™å…¥å•†å“åç§°    ws.append([item_name])        # ğŸ“Œ å†™å…¥è¡¨å¤´å¹¶åŠ ç²—    header = [&quot;å‡ºä»·çŠ¶æ€&quot;, &quot;å‡ºä»·äºº&quot;, &quot;å‡ºä»·æ—¶é—´&quot;, &quot;å‡ºä»·é‡‘é¢&quot;, &quot;åº§ä½ç±»å‹&quot;, &quot;åº§ä½å·&quot;]    ws.append(header)        for cell in ws[2]:  # ç¬¬äºŒè¡Œæ˜¯æ ‡é¢˜è¡Œ        cell.font = Font(bold=True)        # ğŸ“Œ å°†ç«ä»·æ•°æ®å†™å…¥ Excel    for row in dataframe_to_rows(df, index=False, header=False):        ws.append(row)        # ğŸ“Œ æ›´æ–°æœ€å°/æœ€å¤§å‡ºä»·ã€æœ€æ—©/æœ€æ™šå‡ºä»·çš„å‡ºä»·äººä¿¡æ¯    ws = update_min_max_info(df, ws)    # ğŸ“Œ ä¿å­˜ Excel æ–‡ä»¶    wb.save(output_file + &quot;.xlsx&quot;)    print(f&quot;âœ… ç«ä»·æˆåŠŸä¿¡æ¯å·²ä¿å­˜è‡³ &#123;output_file&#125;.xlsx&quot;)\n\n\n\n","slug":"pythonProgram","date":"2025-03-10T14:31:23.000Z","categories_index":"","tags_index":"python,çˆ¬è™«","author_index":"Mess1A"}]