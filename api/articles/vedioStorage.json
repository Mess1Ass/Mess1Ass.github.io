{"title":"在服务器上搭建视频文件分发服务","uid":"10be6ba17a189071ff3c4ecf77a6208e","slug":"vedioStorage","date":"2025-07-10T14:31:23.000Z","updated":"2025-07-28T02:27:19.088Z","comments":true,"path":"api/articles/vedioStorage.json","keywords":null,"cover":"./images/resume_icon.jpg","content":"<h1 id=\"在服务器上搭建视频文件分发服务（FTP-Nginx）\"><a href=\"#在服务器上搭建视频文件分发服务（FTP-Nginx）\" class=\"headerlink\" title=\"在服务器上搭建视频文件分发服务（FTP + Nginx）\"></a>在服务器上搭建视频文件分发服务（FTP + Nginx）</h1><p>在开发前后端分离项目时，经常需要将静态资源如视频、文件等集中管理和访问。本篇记录如何在 Linux 服务器上创建一个 video 文件夹，配置 FTP 服务进行上传管理，并使用 Nginx 搭建文件下载站，实现前端直接访问链接播放视频的需求。</p>\n<h2 id=\"一、目标说明\"><a href=\"#一、目标说明\" class=\"headerlink\" title=\"一、目标说明\"></a>一、目标说明</h2><p>✅ 在服务器上创建 &#x2F;home&#x2F;video 文件夹，用于存储视频资源</p>\n<p>✅ 配置 FTP 服务（vsftpd），方便上传管理视频</p>\n<p>✅ 使用 Nginx 映射该文件夹，实现网页可访问下载</p>\n<p>✅ 前端使用直接链接 <a href=\"https://yourdomain.com/video/xxx.mp4\">https://yourdomain.com/video/xxx.mp4</a> 播放视频</p>\n<h2 id=\"二、创建视频文件夹\"><a href=\"#二、创建视频文件夹\" class=\"headerlink\" title=\"二、创建视频文件夹\"></a>二、创建视频文件夹</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mkdir</span> /home/video</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">chown</span> -R www-data:www-data /home/video</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">chmod</span> -R 755 /home/video</span><br></pre></td></tr></table></figure>\n<h3 id=\"✅-如果你想通过-FTP-上传并非-www-data-用户，也可以给对应用户授权（见下方-FTP-配置）。\"><a href=\"#✅-如果你想通过-FTP-上传并非-www-data-用户，也可以给对应用户授权（见下方-FTP-配置）。\" class=\"headerlink\" title=\"✅ 如果你想通过 FTP 上传并非 www-data 用户，也可以给对应用户授权（见下方 FTP 配置）。\"></a>✅ 如果你想通过 FTP 上传并非 www-data 用户，也可以给对应用户授权（见下方 FTP 配置）。</h3><h2 id=\"三、配置-FTP-服务（vsftpd）\"><a href=\"#三、配置-FTP-服务（vsftpd）\" class=\"headerlink\" title=\"三、配置 FTP 服务（vsftpd）\"></a>三、配置 FTP 服务（vsftpd）</h2><h3 id=\"1-安装-vsftpd\"><a href=\"#1-安装-vsftpd\" class=\"headerlink\" title=\"1. 安装 vsftpd\"></a>1. 安装 vsftpd</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> apt update</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt install vsftpd -y</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-添加-FTP-用户（用于上传）\"><a href=\"#2-添加-FTP-用户（用于上传）\" class=\"headerlink\" title=\"2. 添加 FTP 用户（用于上传）\"></a>2. 添加 FTP 用户（用于上传）</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> adduser ftpuser</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> passwd ftpuser</span><br></pre></td></tr></table></figure>\n<p>把 &#x2F;home&#x2F;video 设置为 ftpuser 的主目录：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> usermod -d /home/video ftpuser</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">chown</span> -R ftpuser:ftpuser /home/video</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-编辑-vsftpd-配置文件\"><a href=\"#3-编辑-vsftpd-配置文件\" class=\"headerlink\" title=\"3. 编辑 vsftpd 配置文件\"></a>3. 编辑 vsftpd 配置文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> nano /etc/vsftpd.conf</span><br></pre></td></tr></table></figure>\n<p>修改或添加以下内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listen=YES</span><br><span class=\"line\">listen_ipv6=NO</span><br><span class=\"line\">anonymous_enable=NO</span><br><span class=\"line\">local_enable=YES</span><br><span class=\"line\">write_enable=YES</span><br><span class=\"line\">local_umask=022</span><br><span class=\"line\">chroot_local_user=YES</span><br><span class=\"line\">allow_writeable_chroot=YES</span><br><span class=\"line\">pasv_enable=YES</span><br><span class=\"line\">pasv_min_port=30000</span><br><span class=\"line\">pasv_max_port=30100</span><br></pre></td></tr></table></figure>\n<p>保存并重启服务：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl restart vsftpd</span><br></pre></td></tr></table></figure>\n<h3 id=\"✅-你现在可以通过-FTP-工具（如-FileZilla）连接服务器上传视频文件到-home-video-目录了。\"><a href=\"#✅-你现在可以通过-FTP-工具（如-FileZilla）连接服务器上传视频文件到-home-video-目录了。\" class=\"headerlink\" title=\"✅ 你现在可以通过 FTP 工具（如 FileZilla）连接服务器上传视频文件到 &#x2F;home&#x2F;video 目录了。\"></a>✅ 你现在可以通过 FTP 工具（如 FileZilla）连接服务器上传视频文件到 &#x2F;home&#x2F;video 目录了。</h3><h2 id=\"四、配置-Nginx-静态文件下载站\"><a href=\"#四、配置-Nginx-静态文件下载站\" class=\"headerlink\" title=\"四、配置 Nginx 静态文件下载站\"></a>四、配置 Nginx 静态文件下载站</h2><h3 id=\"1-修改-Nginx-配置文件\"><a href=\"#1-修改-Nginx-配置文件\" class=\"headerlink\" title=\"1. 修改 Nginx 配置文件\"></a>1. 修改 Nginx 配置文件</h3><p>假设你已经部署了 Nginx，打开你的网站配置：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> nano /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure>\n<p>在 server 块中添加一段：</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">location</span> /video/ &#123;</span><br><span class=\"line\">    <span class=\"attribute\">alias</span> /home/video/;</span><br><span class=\"line\">    <span class=\"attribute\">autoindex</span> <span class=\"literal\">on</span>;</span><br><span class=\"line\">    <span class=\"attribute\">add_header</span> Content-Disposition <span class=\"string\">&quot;inline&quot;</span>;</span><br><span class=\"line\">    <span class=\"attribute\">add_header</span> Access-Control-Allow-Origin *;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-检查配置并重载-Nginx\"><a href=\"#2-检查配置并重载-Nginx\" class=\"headerlink\" title=\"2. 检查配置并重载 Nginx\"></a>2. 检查配置并重载 Nginx</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> nginx -t</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl reload nginx</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-访问测试\"><a href=\"#3-访问测试\" class=\"headerlink\" title=\"3. 访问测试\"></a>3. 访问测试</h3><p>现在你可以通过以下地址直接访问或播放视频了：</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"comment\">//yourdomain.com/video/demo.mp4</span></span><br></pre></td></tr></table></figure>\n<p>浏览器访问 &#x2F;video&#x2F; 目录还可以列出文件清单（如果 autoindex 打开）。</p>\n<h2 id=\"五、前端链接修改\"><a href=\"#五、前端链接修改\" class=\"headerlink\" title=\"五、前端链接修改\"></a>五、前端链接修改</h2><p>在 React 或 Vue 项目中，只需将视频资源链接改成：</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;video src=<span class=\"string\">&quot;https://yourdomain.com/video/sample.mp4&quot;</span> controls /&gt;</span><br></pre></td></tr></table></figure>\n<p>无需额外配置跨域，若接口为不同源，也可以通过 add_header Access-Control-Allow-Origin * 保证资源可访问。</p>\n<h2 id=\"六、其他建议\"><a href=\"#六、其他建议\" class=\"headerlink\" title=\"六、其他建议\"></a>六、其他建议</h2><p>✅ 视频较多建议按日期或类别分文件夹上传，便于管理</p>\n<p>✅ 可配合定时任务（cron）清理过期视频文件</p>\n<p>✅ 如果你对权限有特殊需求，可单独创建用户组并控制文件访问</p>\n<h2 id=\"七、总结\"><a href=\"#七、总结\" class=\"headerlink\" title=\"七、总结\"></a>七、总结</h2><p>通过本文配置，视频资源的上传、管理和前端访问将变得简单高效。适用于博客、后台管理系统、媒体内容平台等场景，结合 FTP 与 Nginx 的优势，即方便管理也支持高并发访问。</p>\n<p>如有更多需求，例如用户上传、权限管理、下载鉴权等，也可以进一步集成 Flask 或 Django 等后端服务做二次开发。</p>\n","feature":true,"text":"服务搭建...","permalink":"/post/vedioStorage","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"服务搭建","slug":"服务搭建","count":1,"path":"api/tags/服务搭建.json"},{"name":"ftp","slug":"ftp","count":1,"path":"api/tags/ftp.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%90%AD%E5%BB%BA%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%8D%E5%8A%A1%EF%BC%88FTP-Nginx%EF%BC%89\"><span class=\"toc-text\">在服务器上搭建视频文件分发服务（FTP + Nginx）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E7%9B%AE%E6%A0%87%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">一、目标说明</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E5%A4%B9\"><span class=\"toc-text\">二、创建视频文件夹</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E2%9C%85-%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%83%B3%E9%80%9A%E8%BF%87-FTP-%E4%B8%8A%E4%BC%A0%E5%B9%B6%E9%9D%9E-www-data-%E7%94%A8%E6%88%B7%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%BB%99%E5%AF%B9%E5%BA%94%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%EF%BC%88%E8%A7%81%E4%B8%8B%E6%96%B9-FTP-%E9%85%8D%E7%BD%AE%EF%BC%89%E3%80%82\"><span class=\"toc-text\">✅ 如果你想通过 FTP 上传并非 www-data 用户，也可以给对应用户授权（见下方 FTP 配置）。</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E9%85%8D%E7%BD%AE-FTP-%E6%9C%8D%E5%8A%A1%EF%BC%88vsftpd%EF%BC%89\"><span class=\"toc-text\">三、配置 FTP 服务（vsftpd）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%AE%89%E8%A3%85-vsftpd\"><span class=\"toc-text\">1. 安装 vsftpd</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%B7%BB%E5%8A%A0-FTP-%E7%94%A8%E6%88%B7%EF%BC%88%E7%94%A8%E4%BA%8E%E4%B8%8A%E4%BC%A0%EF%BC%89\"><span class=\"toc-text\">2. 添加 FTP 用户（用于上传）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E7%BC%96%E8%BE%91-vsftpd-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">3. 编辑 vsftpd 配置文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E2%9C%85-%E4%BD%A0%E7%8E%B0%E5%9C%A8%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87-FTP-%E5%B7%A5%E5%85%B7%EF%BC%88%E5%A6%82-FileZilla%EF%BC%89%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BC%A0%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E5%88%B0-home-video-%E7%9B%AE%E5%BD%95%E4%BA%86%E3%80%82\"><span class=\"toc-text\">✅ 你现在可以通过 FTP 工具（如 FileZilla）连接服务器上传视频文件到 &#x2F;home&#x2F;video 目录了。</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE-Nginx-%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E7%AB%99\"><span class=\"toc-text\">四、配置 Nginx 静态文件下载站</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E4%BF%AE%E6%94%B9-Nginx-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">1. 修改 Nginx 配置文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%A3%80%E6%9F%A5%E9%85%8D%E7%BD%AE%E5%B9%B6%E9%87%8D%E8%BD%BD-Nginx\"><span class=\"toc-text\">2. 检查配置并重载 Nginx</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">3. 访问测试</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%94%E3%80%81%E5%89%8D%E7%AB%AF%E9%93%BE%E6%8E%A5%E4%BF%AE%E6%94%B9\"><span class=\"toc-text\">五、前端链接修改</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%AD%E3%80%81%E5%85%B6%E4%BB%96%E5%BB%BA%E8%AE%AE\"><span class=\"toc-text\">六、其他建议</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%83%E3%80%81%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">七、总结</span></a></li></ol></li></ol>","author":{"name":"Mess1A","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/187351171?s=400&u=9c476f29a83e3e29437a4a4b05a8f9e119a6a631&v=4","link":"/","description":"只要想念 <br /> 就会相见","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"Flask项目服务器部署","uid":"f2cb4d90a926fecafd5804ed8b8967f5","slug":"flaskDeploy","date":"2025-07-10T14:31:23.000Z","updated":"2025-07-28T02:27:19.087Z","comments":true,"path":"api/articles/flaskDeploy.json","keywords":null,"cover":"./images/resume_icon.jpg","text":"服务器部署...","permalink":"/post/flaskDeploy","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"服务器部署","slug":"服务器部署","count":1,"path":"api/tags/服务器部署.json"}],"author":{"name":"Mess1A","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/187351171?s=400&u=9c476f29a83e3e29437a4a4b05a8f9e119a6a631&v=4","link":"/","description":"只要想念 <br /> 就会相见","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}